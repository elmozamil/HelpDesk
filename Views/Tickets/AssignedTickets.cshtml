@model IEnumerable<HelpDesk.Models.Ticket>

@{
    ViewBag.Title = "AssignedTickets";
}

<br/>
<div class="panel panel-info">
    <div class="panel-title"></div>
    <div class="panel-body">
        <div class="table table-condensed">
            <h4> <span class="glyphicon glyphicon-edit"></span> Assigned Tickets</h4>

            <hr />

            <div class="table table-responsive">
                @using (Html.BeginForm("AssignedTickets", "Tickets", FormMethod.Get))
                {
                    <input type="hidden" name="userName" value=@User.Identity.Name />
                    <div class="panel panel-info">
                        <div class="panel-title"></div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-hourglass"></span></span>
                                        @Html.DropDownList("Status", null, "Select status", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>


                                <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-map-marker"></span></span>
                                        @Html.DropDownList("SiteNo", null, "Select Site", htmlAttributes: new { @class = "form-control" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-bookmark"></span></span>
                                        @Html.DropDownList("Priority", null, "Select Priority", new { @class = "form-control" })
                                    </div>
                                </div>

                                <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
                                        @Html.DropDownList("Impact", null, "Select Impact", new { @class = "form-control" })
                                    </div>
                                </div>


                            </div>
                            <br />
                            <div class="row">
                                <div class="col-md-1 col-md-offset-11">
                                    <div class="input-group">
                                        <button type="submit" value="Create" class="btn btn-info btn-circle btn-lg"><i class="fa fa-check"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                }
                <table class="table table-striped table-bordered table-hover dataTable no-footer" id="assignedTable" role="grid" aria-describedby="dataTables-example_info">
                    <thead>
                        <tr>
                            <th>
                                No
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Subject)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Priority)
                            </th>
                            <th>
                                Created
                            </th>
                            <th>
                                Category
                            </th>
                            <th>
                                Issuer
                            </th>
                            <th>
                                Phone
                            </th>
                            <th>
                                Status
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.ActionLink(Html.DisplayFor(model => item.TicketNo).ToString(), "Edit", new { id = item.TicketNo })
                                </td>
                                <td>
                                    @Html.ActionLink(Html.DisplayFor(modelItem => item.Subject).ToString(), "Edit", new { id = item.TicketNo })
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Priority)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CreatedDate)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Category.CategoryName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Employee.EmployeeName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.ActivePhone)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Status)
                                </td>
                                <td>
                                    <a href=~/Tickets/Edit/@item.TicketNo><i class="fa fa-info"></i></a>
                                    @*@Html.ActionLink("Details", "Edit", new { id = item.TicketNo, @class = "fa fa-info" })*@
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @*@Scripts.Render("~/bundles/jqueryval")*@
    @Scripts.Render("~/bundles/dataTable")
    <script>
        var assignedTable = $('#assignedTable').DataTable();
    </script>
}